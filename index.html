<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Treino da M√£e</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #E91E63;
            --primary-dark: #C2185B;
            --primary-light: #F8BBD0;
            --bg-app: #F0F2F5;
            --card-bg: #FFFFFF;
            --text-dark: #2D3748;
            --text-gray: #718096;
            --section-title: #880e4f;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-app);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            color: var(--text-dark);
        }

        .app-container {
            width: 100%;
            max-width: 480px;
            background-color: var(--bg-app);
            position: relative;
            min-height: 100vh;
            padding-bottom: 40px;
        }

        /* HEADER */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            padding: 25px 20px 45px 20px;
            color: white;
            border-bottom-left-radius: 35px;
            border-bottom-right-radius: 35px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .header h1 { margin: 0; font-size: 2rem; font-weight: 800; }
        .header p { margin: 5px 0 0; opacity: 0.9; font-weight: 600; }

        /* DATA NAV */
        .date-nav {
            background: rgba(255,255,255,0.2);
            margin-top: 20px;
            padding: 10px 15px;
            border-radius: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .nav-btn { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
        .current-date { text-align: center; color: white; }
        .current-date span { display: block; font-size: 0.8rem; opacity: 0.9; font-weight: 700; }
        .current-date strong { font-size: 1.4rem; font-weight: 800; }

        /* CONTENT */
        .content { padding: 20px; margin-top: -30px; }

        .card {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }

        .tag {
            background: var(--primary-light);
            color: var(--primary-dark);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 800;
            display: inline-block;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        h2.treino-titulo { margin: 0 0 10px 0; color: var(--text-dark); font-size: 1.6rem; font-weight: 800; }
        p.treino-desc { color: var(--text-gray); margin-bottom: 20px; font-size: 0.95rem; }

        /* SEPARADORES DE SE√á√ÉO */
        .section-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 25px 0 15px 0;
            color: var(--section-title);
            font-weight: 800;
            font-size: 1.1rem;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        .section-header::after {
            content: '';
            flex: 1;
            height: 2px;
            background: #ffe0eb;
            border-radius: 2px;
        }
        .section-header span { background: #ffe0eb; padding: 5px 10px; border-radius: 8px; }

        /* LISTA */
        .exercise-list { display: flex; flex-direction: column; gap: 12px; }

        .exercise-item {
            background: #F8F9FA;
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .exercise-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            background: white;
        }
        .exercise-header strong { font-size: 1rem; color: var(--text-dark); }
        .meta { font-size: 0.85rem; color: var(--primary); font-weight: 700; background: #FFF0F5; padding: 4px 8px; border-radius: 8px; }

        .exercise-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: #FAFAFA;
            padding: 0 20px;
        }
        .exercise-item.active .exercise-details { padding: 15px 20px; max-height: 800px; border-top: 1px solid #eee; }

        .detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; }
        .detail-box span { display: block; font-size: 0.75rem; color: #777; font-weight: 700; }
        .detail-box strong { font-size: 1rem; color: #333; }

        .media-container { margin-top: 15px; }
        .exercise-img { width: 100%; border-radius: 10px; margin-bottom: 10px; border: 1px solid #eee; }
        .btn-video {
            display: block; width: 100%; text-align: center; background: #333; color: white;
            padding: 10px; border-radius: 10px; text-decoration: none; font-size: 0.9rem; font-weight: 700;
        }

        .btn-primary {
            width: 100%; background: linear-gradient(to right, var(--primary), var(--primary-dark));
            color: white; border: none; padding: 18px; border-radius: 15px;
            font-size: 1.1rem; font-weight: 800; cursor: pointer; margin-top: 30px;
            box-shadow: 0 6px 20px rgba(233, 30, 99, 0.3);
        }
        
        .empty-state { text-align: center; color: #888; padding: 40px 20px; }

        @media (min-width: 768px) {
            body { align-items: center; background: #E2E8F0; }
            .app-container { border-radius: 30px; height: calc(100vh - 40px); overflow-y: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="header">
        <h1>Ol√°, M√£e! ‚ù§Ô∏è</h1>
        <p>Hoje √© dia de se cuidar!</p>
        <div class="date-nav">
            <button class="nav-btn" onclick="mudarDia(-1)">‚Üê</button>
            <div class="current-date">
                <span id="diaSemana">...</span>
                <strong id="diaMes">...</strong>
            </div>
            <button class="nav-btn" onclick="mudarDia(1)">‚Üí</button>
        </div>
    </div>

    <div class="content" id="workoutContainer">
        <div class="card empty-state">Carregando...</div>
    </div>
</div>

<script>
    let currentDate = new Date();
    let treinosData = null;

    async function carregarDados() {
        try {
            const response = await fetch('treinos.json?v=' + new Date().getTime());
            treinosData = await response.json();
            renderizarDia();
        } catch (error) {
            document.getElementById('workoutContainer').innerHTML = '<div class="card empty-state">Erro ao carregar dados.</div>';
        }
    }

    function renderizarDia() {
        const dias = ['DOMINGO', 'SEGUNDA', 'TER√áA', 'QUARTA', 'QUINTA', 'SEXTA', 'S√ÅBADO'];
        document.getElementById('diaSemana').innerText = dias[currentDate.getDay()];
        
        const d = String(currentDate.getDate()).padStart(2,'0');
        const m = String(currentDate.getMonth()+1).padStart(2,'0');
        document.getElementById('diaMes').innerText = `${d}/${m}`;

        renderizarTreino(currentDate.getDay());
    }

    function mudarDia(delta) {
        currentDate.setDate(currentDate.getDate() + delta);
        renderizarDia();
    }

    // Fun√ß√£o auxiliar para gerar HTML de uma lista de exerc√≠cios
    function gerarListaExercicios(lista, tipoID) {
        if (!lista || lista.length === 0) return '';
        
        let html = `<div class="exercise-list">`;
        lista.forEach((ex, idx) => {
            const uniqueID = `${tipoID}-${idx}`;
            
            // Verifica se tem imagem ou v√≠deo
            let mediaHtml = '';
            if(ex.imagem) mediaHtml += `<img src="${ex.imagem}" class="exercise-img" loading="lazy">`;
            if(ex.video) mediaHtml += `<a href="${ex.video}" target="_blank" class="btn-video">‚ñ∂ Ver V√≠deo</a>`;
            if(mediaHtml) mediaHtml = `<div class="media-container">${mediaHtml}</div>`;

            const obsHtml = ex.obs ? `<div style="margin-top:10px; padding:10px; background:#fff3cd; color:#856404; border-radius:8px; font-size:0.9rem;">üí° ${ex.obs}</div>` : '';

            html += `
            <div class="exercise-item" id="item-${uniqueID}">
                <div class="exercise-header" onclick="toggleDetails('${uniqueID}')">
                    <strong>${ex.nome}</strong>
                    <span class="meta">${ex.series}x ${ex.repeticoes}</span>
                </div>
                <div class="exercise-details">
                    <div class="detail-grid">
                        <div class="detail-box"><span>CARGA</span><strong>${ex.carga || '-'}</strong></div>
                        <div class="detail-box"><span>CAD√äNCIA</span><strong>${ex.cadencia || '-'}</strong></div>
                    </div>
                    ${obsHtml}
                    ${mediaHtml}
                </div>
            </div>`;
        });
        html += `</div>`;
        return html;
    }

    function renderizarTreino(diaIndex) {
        const container = document.getElementById('workoutContainer');
        container.innerHTML = '';

        if (!treinosData) return;
        const treino = treinosData.rotina.find(t => t.dias_semana.includes(diaIndex));

        if (treino) {
            const htmlMobilidade = gerarListaExercicios(treino.mobilidade, 'mob');
            const htmlPrincipal = gerarListaExercicios(treino.principal, 'main');
            const htmlAlongamento = gerarListaExercicios(treino.alongamento, 'along');

            container.innerHTML = `
                <div class="card">
                    <span class="tag">${treino.nome}</span>
                    <h2 class="treino-titulo">Treino do Dia</h2>
                    <p class="treino-desc">${treino.descricao}</p>
                    
                    ${htmlMobilidade ? `<div class="section-header"><span>üßò Mobilidade</span></div>${htmlMobilidade}` : ''}
                    
                    <div class="section-header"><span>üí™ Muscula√ß√£o</span></div>
                    ${htmlPrincipal}

                    ${htmlAlongamento ? `<div class="section-header"><span>üçÉ Alongamento</span></div>${htmlAlongamento}` : ''}

                    <button class="btn-primary" onclick="finalizarTreino('${treino.nome}')">
                        Concluir e Enviar Feedback
                    </button>
                </div>
            `;
        } else {
            container.innerHTML = `
                <div class="card empty-state">
                    <div style="font-size:3rem; margin-bottom:10px;">üò¥</div>
                    <h3>Dia de Descanso</h3>
                    <p>Nenhum treino programado para hoje.</p>
                </div>
            `;
        }
    }

    function toggleDetails(uid) {
        // Fecha outros
        document.querySelectorAll('.exercise-item.active').forEach(el => {
            if(el.id !== `item-${uid}`) el.classList.remove('active');
        });
        document.getElementById(`item-${uid}`).classList.toggle('active');
    }

    function finalizarTreino(nome) {
        const tel = "5561992265542"; // Seu n√∫mero
        const texto = `*Feedback M√£e* üíñ\n\nFinalizei o *${nome}*!\nData: ${document.getElementById('diaMes').innerText}\n\nComo foi? \n( ) F√°cil\n( ) M√©dio\n( ) Dif√≠cil`;
        const url = `https://wa.me/${tel}?text=${encodeURIComponent(texto)}`;
        window.open(url, '_blank');
    }

    carregarDados();
</script>

</body>
</html>